<!DOCTYPE html>
<html>
    <head>
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-145819933-1"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'UA-145819933-1');
        </script>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <link href="https://fonts.googleapis.com/css?family=Crimson+Pro:400,600" rel="stylesheet">
        <style>
            body {
                font-size: 18px;
                font-family: "Crimson Pro", serif;
                line-height: 1.3em;
            }

            main {
                max-width: 700px;
                margin: 50px auto 0;
            }

            section > h1 {
                font-size: 20px;
                margin-top: 30px;
                margin-bottom: 10px;
            }

            section > p:nth-of-type(1) {
                margin-top: 0;
            }

            section ul {
                margin: 0;
            }

            section ul li:not(:first-child) {
                margin-top: 10px;
            }

            section ul > li > h2 {
                font-size: 18px;
                display: inline;
            }

            section ul > li > p:before {
                content: " - ";
            }

            section ul > li > p {
                display: inline;
            }

            .center {
                text-align: center;
            }
        </style>        
        <title>Improve LLVM binary utilities - GSoC'19</title>
    </head>
    <body>
        <main>
            <h1 class="center">GSoC'19 - Improve LLVM binary utilities</h1>
            <p class="center">Seiya Nuta<br>Aug 22, 2019</p>
            <h2>Abstract</h2>
            <b><a href="https://docs.google.com/document/d/1HpgtcUt02NG-2cRf6eSwGMi2fSZWOSE9vt0JPACG-VM/edit?usp=sharing">Proposal is here.</a></b>
            <p>LLVM includes binary utilities equivalent to GNU binutils. Basic functionalities are
                implemented but there are incomplete ones such as Mach-O support. This project aims to support
                those missing functionalities and improve usability for those who crave for an alternative to GNU binutils.
            <p>The goal of this project is twofold:
            <ul>
                <li>llvm-objcopy: Improve Mach-O support</li>
                <li>llvm-objdump: More human-friendly disassembly</li>
            </ul>

            <h2>Status</h2>
            <p>I've implemented all functionalities proposed in the proposal but majority of them are under review.
               For more details, see patches listed below.

            <h2>Acknowledgements</h2>
            <p>I would like to express my special thanks to James Henderson and Jordan Rupprecht for mentoring me to
               become a part of the LLVM community. With their awesome support, I learned and experienced a lot of
               precious things throughout the GSoC and it was really (really!) fun.
            <h2>Authored Patches in reviews.llvm.org</h2>
            <ul>
                <li><a href="https://reviews.llvm.org/D66409">[llvm-objcopy][MachO] Implement -Obinary</a></li>
                <li><a href="https://reviews.llvm.org/D66408">[llvm-objcopy][MachO] Implement --dump-section</a></li>
                <li><a href="https://reviews.llvm.org/D66407">[llvm-objcopy][MachO] Implement -Ibinary</a></li>
                <li><a href="https://reviews.llvm.org/D66283">[llvm-objcopy][MachO] Implement --add-section</a></li>
                <li><a href="https://reviews.llvm.org/D66282">[llvm-objcopy][MachO] Implement --remove-section</a></li>
                <li><a href="https://reviews.llvm.org/D66281">[llvm-objcopy][MachO] Implement --strip-all</a></li>
                <li><a href="https://reviews.llvm.org/D66280">[llvm-objcopy][MachO] Support indirect symbol table</a></li>
                <li><a href="https://reviews.llvm.org/D66075">[llvm-readobj][MachO] Fix section type printing</a></li>
                <li><a href="https://reviews.llvm.org/D65799">[yaml2obj/obj2yaml][MachO] Allow setting custom section data</a></li>
                <li><a href="https://reviews.llvm.org/D65541">[llvm-objcopy][MachO] Implement --only-section</a></li>
                <li><a href="https://reviews.llvm.org/D65540">[llvm-objcopy][MachO] Fix method names. NFC.</a></li>
                <li><a href="https://reviews.llvm.org/D65539">[llvm-objcopy][MachO] Implement a layout algorithm for executables</a></li>
                <li><a href="https://reviews.llvm.org/D65191">[llvm-objdump] Implement highlighting</a></li>
                <li><a href="https://reviews.llvm.org/D65190">[X86] X86ATTInstPrinter: replace markup with startMarkup/endMarkup</a></li>
                <li><a href="https://reviews.llvm.org/D65189">[MC] Support returning marked up ranges in the disassembly</a></li>
                <li><a href="https://reviews.llvm.org/D65188">[MC] Support returning a structured rich disassembly output</a></li>
                <li><a href="https://reviews.llvm.org/D64969">[llvm-objdump][NFC] Make the PrettyPrinter::printInst() output buffered</a></li>
                <li><a href="https://reviews.llvm.org/D64311">[llvm-objdump] Implement syntax highlighting</a></li>
                <li><a href="https://reviews.llvm.org/D64170">[llvm-objcopy][NFC] Refactor output target parsing v2</a></li>
                <li><a href="https://reviews.llvm.org/D63847">[MC] Add MCInstrAnalysis::evaluateMemoryOperandAddress</a></li>
                <li><a href="https://reviews.llvm.org/D63699">[llvm-objcopy][MachO] Fix strict-aliasing warning. NFCI</a></li>
                <li><a href="https://reviews.llvm.org/D63395">[llvm-objcopy][MachO] Support load commands used in executables/shared libraries</a></li>
                <li><a href="https://reviews.llvm.org/D63309">[llvm-objcopy][MachO] Rebuild the symbol/string table in the writer</a></li>
                <li><a href="https://reviews.llvm.org/D63251">[llvm-objcopy] Fix sparc target endianness</a></li>
                <li><a href="https://reviews.llvm.org/D63239">[llvm-objcopy][NFC] Refactor output target parsing</a></li>
                <li><a href="https://reviews.llvm.org/D63238">[llvm-objcopy] Add elf32-sparc and elf32-sparcel target</a></li>
                <li><a href="https://reviews.llvm.org/D63184">[llvm-objcopy] Recognize the output file format other than ELF</a></li>
                <li><a href="https://reviews.llvm.org/D62991">[yaml2obj][MachO] Don't fill dummy data for virtual sections</a></li>
                <li><a href="https://reviews.llvm.org/D62652">[llvm-objcopy][MachO] Recompute and update offset/size fields in the writer</a></li>
                <li><a href="https://reviews.llvm.org/D62578">[llvm-objcopy][MachO] Print an error message on use of unsupported options</a></li>
            </ul>
            
            <h2>Patches that are not yet uploaded to Phabricator</h2>
            Those patches are ready to upload but I'd like to focus on already sent patches.
            <ul>
                <li><a href="https://github.com/llvm/llvm-project/commit/572f934dd09556b331b951471af5681ce311b3b9">[llvm-objdump] Print symbol names referenced by memory operands</a></li>
                <li><a href="https://github.com/llvm/llvm-project/commit/9885e7fd72c954600d15e3d1f7ae77cbc5d89f6f">[llvm-objdump] Print string literals</a></li>
                <li><a href="https://github.com/llvm/llvm-project/commit/41e2ea6162142100cb063daadccacb56327788f8">[llvm-objdump] Highlight relocations</a></li>
                <li><a href="https://github.com/llvm/llvm-project/commit/5eea6180a4faa2c20f9932eafafcd78a704b834c">[llvm-objcopy][MachO] Implement --set-section-flags</a></li>
                <li><a href="https://github.com/llvm/llvm-project/commit/aa89503aae1287b61577db03ac36ecafc94e4cc1">[llvm-objcopy][MachO] Implement --rename-section</a></li>
            </ul>
        </main>
    </body>
</html>
